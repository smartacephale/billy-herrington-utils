{"version":3,"file":"billy-herrington-utils.umd.js","sources":["../src/utils/strings/index.ts","../src/utils/parsers/index.ts","../src/utils/observers/index.ts","../src/utils/math/index.ts","../src/utils/dom/index.ts","../src/utils/fetch/index.ts","../src/utils/events/index.ts","../src/utils/device/index.ts","../src/utils/async/index.ts","../src/utils/arrays/index.ts"],"sourcesContent":["export function stringToWords(s: string): Array<string> {\r\n  return s.split(\",\").map(s => s.trim().toLowerCase()).filter(_ => _);\r\n}\r\n\r\nexport function sanitizeStr(s: string) {\r\n  return s?.replace(/\\n|\\t/, ' ').replace(/ {2,}/, ' ').trim().toLowerCase() || \"\";\r\n}\r\n","export function timeToSeconds(t: string): number {\r\n  return (t?.match(/\\d+/gm) || [0])\r\n    .reverse()\r\n    .map((s, i) => parseInt(s as string) * 60 ** i)\r\n    .reduce((a, b) => a + b);\r\n}\r\n\r\nexport function parseIntegerOr(n: string | number, or: number): number {\r\n  return Number.isInteger(parseInt(n as string)) ? parseInt(n as string) : or;\r\n}\r\n\r\n// \"data:02;body+head:async;void:;zero:;\"\r\nexport function parseDataParams(str: string) {\r\n  const params = str.split(';').flatMap(s => {\r\n    const parsed = s.match(/([\\+\\w+]+):(\\w+)?/);\r\n    const value = parsed?.[2];\r\n    if (value) return parsed[1].split('+').map(p => ({ [p]: value }));\r\n  }).filter(_ => _);\r\n  return Object.assign({}, ...params);\r\n}\r\n\r\nexport function parseCSSUrl(s: string) {\r\n  return s.replace(/url\\(\"|\\\"\\).*/g, '');\r\n}","export class Observer {\r\n  public observer: IntersectionObserver;\r\n  constructor(private callback: (entry: Element) => void) {\r\n    this.observer = new IntersectionObserver(this.handleIntersection.bind(this));\r\n  }\r\n\r\n  observe(target: Element) {\r\n    this.observer.observe(target);\r\n  }\r\n\r\n  throttle(target: Element, throttleTime: number) {\r\n    this.observer.unobserve(target);\r\n    setTimeout(() => this.observer.observe(target), throttleTime);\r\n  }\r\n\r\n  handleIntersection(entries: Iterable<IntersectionObserverEntry>) {\r\n    for (const entry of entries) {\r\n      if (entry.isIntersecting) {\r\n        this.callback(entry.target);\r\n      }\r\n    }\r\n  }\r\n\r\n  static observeWhile(target: Element, callback: () => Promise<boolean> | boolean, throttleTime: number) {\r\n    const observer_ = new Observer(async (target: Element) => {\r\n      const condition = await callback();\r\n      if (condition) observer_.throttle(target, throttleTime);\r\n    });\r\n    observer_.observe(target);\r\n    return observer_;\r\n  }\r\n}\r\n\r\nexport class LazyImgLoader {\r\n  public lazyImgObserver: Observer;\r\n  private attributeName = 'data-lazy-load';\r\n\r\n  constructor(shouldDelazify: (target: Element) => boolean) {\r\n    this.lazyImgObserver = new Observer((target: Element) => {\r\n      if (shouldDelazify(target)) {\r\n        this.delazify(target as HTMLImageElement);\r\n      }\r\n    });\r\n  }\r\n\r\n  lazify(_target: Element, img: HTMLImageElement, imgSrc: string) {\r\n    if (!img || !imgSrc) return;\r\n    img.setAttribute(this.attributeName, imgSrc);\r\n    img.src = '';\r\n    this.lazyImgObserver.observe(img);\r\n  }\r\n\r\n  delazify = (target: HTMLImageElement) => {\r\n    this.lazyImgObserver.observer.unobserve(target);\r\n    target.src = target.getAttribute(this.attributeName) as string;\r\n    target.removeAttribute(this.attributeName);\r\n  }\r\n}\r\n","export function circularShift(n: number, c = 6, s = 1): number {\r\n  return (n + s) % c || c;\r\n}\r\n","export function parseDom(html: string): HTMLElement {\r\n  const parsed = new DOMParser().parseFromString(html, 'text/html').body;\r\n  return parsed.children.length > 1 ? parsed : parsed.firstElementChild as HTMLElement;\r\n}\r\n\r\nexport function copyAttributes(target: HTMLElement | Element, source: HTMLElement | Element) {\r\n  for (const attr of source.attributes) {\r\n    attr.nodeValue && target.setAttribute(attr.nodeName, attr.nodeValue);\r\n  }\r\n}\r\n\r\nexport function replaceElementTag(e: HTMLElement | Element, tagName: string) {\r\n  const newTagElement = document.createElement(tagName);\r\n  copyAttributes(newTagElement, e);\r\n  newTagElement.innerHTML = e.innerHTML;\r\n  e.parentNode?.replaceChild(newTagElement, e);\r\n  return newTagElement;\r\n}\r\n\r\nexport function getAllUniqueParents(elements: HTMLCollection): Array<HTMLElement | Element> {\r\n  return Array.from(elements).reduce((acc, v) => {\r\n    if (v.parentElement && !acc.includes(v.parentElement as HTMLElement)) { acc.push(v.parentElement); }\r\n    return acc;\r\n  }, [] as Array<HTMLElement | Element>);\r\n}\r\n\r\nexport function findNextSibling(el: HTMLElement | Element) {\r\n  if (el.nextElementSibling) return el.nextElementSibling;\r\n  if (el.parentElement) return findNextSibling(el.parentElement);\r\n  return null;\r\n}\r\n\r\nexport function waitForElementExists(parent: HTMLElement | Element, selector: string, callback: (el: Element) => void): void {\r\n  const observer = new MutationObserver((_mutations) => {\r\n    const el = parent.querySelector(selector);\r\n    if (el) {\r\n      observer.disconnect();\r\n      callback(el);\r\n    }\r\n  });\r\n  observer.observe(document.body, { childList: true, subtree: true });\r\n}\r\n\r\nexport function watchElementChildrenCount(element: HTMLElement | Element,\r\n  callback: (observer: MutationObserver, count: number) => void): void {\r\n  let count = element.children.length;\r\n  const observer = new MutationObserver((mutationList, observer) => {\r\n    for (const mutation of mutationList) {\r\n      if (mutation.type === \"childList\") {\r\n        if (count !== element.children.length) {\r\n          count = element.children.length;\r\n          callback(observer, count);\r\n        }\r\n      }\r\n    }\r\n  });\r\n  observer.observe(element, { childList: true });\r\n}\r\n\r\nexport function watchDomChangesWithThrottle(element: HTMLElement | Element, callback: () => void,\r\n  throttle = 1000, options: Record<string, boolean> = { childList: true, subtree: true, attributes: true }) {\r\n  let lastMutationTime: number;\r\n  let timeout: number;\r\n  const observer = new MutationObserver((_mutationList, _observer) => {\r\n    const now = Date.now();\r\n    if (lastMutationTime && now - lastMutationTime < throttle) {\r\n      timeout && clearTimeout(timeout);\r\n    }\r\n    timeout = setTimeout(callback, throttle);\r\n    lastMutationTime = now;\r\n  });\r\n  observer.observe(element, options);\r\n}\r\n\r\nexport function downloader(options = { append: \"\", after: \"\", button: \"\", cbBefore: () => { } }) {\r\n  const btn = parseDom(options.button);\r\n\r\n  if (options.append) document.querySelector(options.append)?.append(btn);\r\n  if (options.after) document.querySelector(options.after)?.after(btn);\r\n\r\n  btn.addEventListener('click', (e) => {\r\n    e.preventDefault();\r\n\r\n    if (options.cbBefore) options.cbBefore();\r\n\r\n    waitForElementExists(document.body, 'video', (video: Element) => {\r\n      window.location.href = video.getAttribute('src') as string;\r\n    });\r\n  });\r\n}","import { parseDom } from \"../dom\";\r\n\r\nexport const MOBILE_UA = [\r\n  'Mozilla/5.0 (Linux; Android 10; K)',\r\n  'AppleWebKit/537.36 (KHTML, like Gecko)',\r\n  'Chrome/114.0.0.0 Mobile Safari/537.36'].join(' ');\r\n\r\nexport function fetchWith(url: string, options: Record<string, boolean> = { html: false, mobile: false }) {\r\n  const reqOpts = {};\r\n  if (options.mobile) Object.assign(reqOpts, { headers: new Headers({ \"User-Agent\": MOBILE_UA }) });\r\n  return fetch(url, reqOpts).then((r) => r.text()).then(r => options.html ? parseDom(r) : r);\r\n}\r\n\r\nexport const fetchHtml = (url: string) => fetchWith(url, { html: true });\r\n\r\nexport const fetchText = (url: string) => fetchWith(url);\r\n\r\nexport function objectToFormData(object: Record<string, number | boolean | string>): FormData {\r\n  const formData = new FormData();\r\n  Object.entries(object).forEach(([k, v]) => formData.append(k, v as string));\r\n  return formData;\r\n}\r\n","export function listenEvents(dom: HTMLElement | Element, events: Array<string>, callback: (e: Event) => void): void {\r\n  for (const e of events) {\r\n    dom.addEventListener(e, callback, true);\r\n  }\r\n}\r\n\r\nexport class Tick {\r\n  private tick: null | number;\r\n  private callbackFinal: (() => void) | undefined;\r\n\r\n  constructor(private delay: number, private startImmediate = true) {\r\n    this.tick = null;\r\n    this.delay = delay;\r\n    this.startImmediate = startImmediate;\r\n  }\r\n\r\n  start(callback: () => void, callbackFinal = undefined) {\r\n    this.stop();\r\n    this.callbackFinal = callbackFinal;\r\n    if (this.startImmediate) callback();\r\n    this.tick = setInterval(callback, this.delay);\r\n  }\r\n\r\n  stop() {\r\n    if (this.tick !== null) {\r\n      clearInterval(this.tick);\r\n      this.tick = null;\r\n    }\r\n    if (this.callbackFinal) {\r\n      this.callbackFinal();\r\n      this.callbackFinal = undefined;\r\n    }\r\n  }\r\n}","export function isMob() {\r\n  return /iPhone|Android/i.test(navigator.userAgent);\r\n}","// https://2ality.com/2016/10/asynchronous-iteration.html\r\nexport async function computeAsyncOneAtTime(iterable: Iterable<() => Promise<void>>) {\r\n  const res = [];\r\n  for await (const f of iterable) {\r\n    res.push(await f());\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function wait(milliseconds: number) {\r\n  return new Promise(resolve => setTimeout(resolve, milliseconds));\r\n}\r\n\r\ninterface SyncPoolObject {\r\n  v: () => Promise<void>,\r\n  p: number\r\n}\r\n\r\nexport class AsyncPool {\r\n  cur = 0;\r\n  private finished: Promise<boolean>;\r\n  private _resolve?: (value: boolean | PromiseLike<boolean>) => void;\r\n\r\n  constructor(private max = 1, private pool: Array<SyncPoolObject> = []) {\r\n    this.finished = new Promise((resolve) => {\r\n      this._resolve = resolve;\r\n    });\r\n  }\r\n\r\n  getHighPriorityFirst(p = 0): (() => Promise<void>) | undefined {\r\n    if (p > 3 || this.pool.length === 0) return undefined;\r\n    const i = this.pool.findIndex(e => e.p === p);\r\n    if (i >= 0) {\r\n      const res = this.pool[i].v;\r\n      this.pool = this.pool.slice(0, i).concat(this.pool.slice(i + 1));\r\n      return res;\r\n    }\r\n    return this.getHighPriorityFirst(p + 1);\r\n  }\r\n\r\n  async runTask() {\r\n    this.cur++;\r\n    const f = this.getHighPriorityFirst();\r\n    await f?.();\r\n    this.cur--;\r\n    this.runTasks();\r\n  }\r\n\r\n  runTasks() {\r\n    if (!this.pool.length) this._resolve?.(true);\r\n    if (this.cur < this.max) {\r\n      this.runTask();\r\n      this.runTasks();\r\n    }\r\n  }\r\n\r\n  async run() {\r\n    this.runTasks();\r\n    return this.finished;\r\n  }\r\n\r\n  push(x: SyncPoolObject | (() => Promise<void>)) {\r\n    this.pool.push('p' in x ? x : ({ v: x, p: 0 }));\r\n  }\r\n}","export function chunks<T>(arr: Array<T>, n: number): Array<Array<T>> {\r\n  const res = [];\r\n  for (let i = 0; i < arr.length; i += n) {\r\n    res.push(arr.slice(i, i + n));\r\n  }\r\n  return res;\r\n}\r\n\r\nexport function range(size: number, startAt = 1): Array<number> {\r\n  return [...Array(size).keys()].map(i => i + startAt);\r\n}"],"names":["s","target","observer"],"mappings":"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"}